# 비주얼 노벨 스크립트 작성 가이드

이 가이드는 LLM이 비주얼 노벨 게임의 스크립트를 작성할 때 참고할 수 있도록 작성되었습니다.

## 📋 기본 구조

스크립트는 **챕터(Chapter) 단위**로 분리되며, 각 챕터는 독립적인 폴더로 관리됩니다.
각 챕터 내에서 여러 씬 파일들이 JSON 형식으로 저장됩니다.

### 챕터 폴더 구조

```
Script/
├── Chapter1/
│   └── ...
├── Chapter2/
│   └── ...
├── Chapter3/
│   └── ...
├── Chapter4/
│   └── ...
└── Chapter5/
```

### 씬 파일 구조

```json
{
  "sceneId": "씬_고유_ID",
  "title": "씬 제목",
  "chapter": 1,
  "startId": "시작_라인_ID",
  "lines": [
    // 대사 라인(Line) 배열
  ]
}
```

## 🎭 대사 라인(Line) 작성

각 라인은 하나의 대화, 선택지, 또는 이벤트를 나타냅니다.

### 기본 대화 라인

```json
{
  "id": "scene_01",
  "type": "dialogue",
  "character": "사쿠라",
  "characterImage": "sakura_normal.png",
  "characterPosition": "center-left",
  "background": "school_hallway.svg",
  "music": "peaceful_theme.mp3",
  "text": "안녕! 나는 사쿠라야.",
  "nextScriptId": "scene_02"
}
```

### 효과음이 있는 대화 라인

```json
{
  "id": "scene_door",
  "type": "dialogue",
  "character": "내레이터",
  "background": "school_hallway.svg",
  "effectSound": "door_open.mp3",
  "text": "문을 열었다.",
  "nextScriptId": "scene_02"
}
```

### 배경음악 변경 라인

```json
{
  "id": "scene_battle",
  "type": "dialogue",
  "character": "내레이터",
  "background": "battle_field.svg",
  "music": "battle_theme.mp3",
  "effectSound": "siren.mp3",
  "text": "갑자기 긴급 사이렌이 울려퍼졌다!",
  "nextScriptId": "scene_03"
}
```

### 배경음악 정지 라인

```json
{
  "id": "scene_silent",
  "type": "dialogue",
  "character": "내레이터",
  "background": "empty_room.svg",
  "music": "none",
  "text": "조용한 침묵만이 흘렀다...",
  "nextScriptId": "scene_04"
}
```

### 선택지 라인

```json
{
  "id": "choice_01",
  "type": "choice",
  "character": "내레이터",
  "background": "school_entrance.svg",
  "text": "어디로 가볼까?",
  "choices": [
    {
      "text": "도서관으로 간다",
      "nextSceneFile": "Chapter1/chapter1_library.json"
    },
    {
      "text": "카페로 간다",
      "nextSceneFile": "Chapter1/chapter1_cafe.json"
    },
    {
      "text": "정원으로 간다",
      "nextSceneFile": "Chapter1/chapter1_garden.json"
    }
  ]
}
```

### 챕터 전환 라인

```json
{
  "id": "chapter_end",
  "type": "dialogue",
  "character": "내레이터",
  "characterPosition": "center",
  "background": "sunset.svg",
  "text": "그렇게 첫날이 끝났다... Chapter 2로 계속",
  "nextSceneFile": "Chapter2/chapter2_morning.json"
}
```

### 엔딩 라인

```json
{
  "id": "ending_final",
  "type": "dialogue",
  "character": "설아",
  "characterImage": "seolah_smile.png",
  "characterPosition": "center",
  "background": "ending_bg.svg",
  "text": "우리 함께 영원히...",
  "isEnding": true
}
```

## 📝 필드 설명

### 필수 필드

| 필드 | 타입 | 설명 | 예시 |
|------|------|------|------|
| `id` | string | 라인의 고유 ID | `"scene_01"` |
| `type` | string | 라인 타입 (`"dialogue"` 또는 `"choice"`) | `"dialogue"` |
| `text` | string | 표시될 텍스트 | `"안녕하세요!"` |

### 선택적 필드

| 필드 | 타입 | 설명 | 예시 |
|------|------|------|------|
| `character` | string | 캐릭터 이름 | `"사쿠라"`, `"유키"` |
| `characterImage` | string | 캐릭터 이미지 파일명 (캐릭터ID_표정명.png) | `"sakura_smile.png"`, `"seolah_panic.png"` |
| `characterPosition` | string | 캐릭터 위치 | `"left"`, `"center-left"`, `"center"`, `"center-right"`, `"right"` |
| `background` | string | 배경 이미지 파일명 | `"school_entrance.svg"` |
| `music` | string | 배경음악 파일명 (`"none"`이면 음악 정지) | `"peaceful_theme.mp3"`, `"none"` |
| `effectSound` | string | 효과음 파일명 | `"door_open.mp3"`, `"siren.mp3"` |
| `nextScriptId` | string | 같은 씬 파일 내 다음 라인 ID | `"scene_02"` |
| `nextSceneFile` | string | 다음 씬 파일 경로 (챕터 포함) | `"Chapter2/chapter2_morning.json"` |
| `isEnding` | boolean | 엔딩 여부 (true면 게임 종료) | `true` 또는 생략 |
| `choices` | array | 선택지 배열 (type이 `"choice"`일 때만) | 아래 참조 |

### 선택지 구조

```json
{
  "text": "선택지 텍스트",
  "nextScriptId": "같은_씬_파일_내_라인_ID",  // 또는
  "nextSceneFile": "Chapter2/chapter2_route_a.json"  // 다른 씬 파일로 이동
}
```

## 🎨 캐릭터 & 이미지 설정

### 캐릭터 포지션

- `left`: 왼쪽 끝
- `center-left`: 중앙 왼쪽
- `center`: 정중앙
- `center-right`: 중앙 오른쪽
- `right`: 오른쪽 끝

### 캐릭터 이미지 예시

#### 주요 캐릭터

**파일 네이밍 규칙**: `캐릭터ID_표정명.png`

```
sakura_normal.png      # 사쿠라 - 평상시
sakura_smile.png       # 사쿠라 - 미소
sakura_happy.png       # 사쿠라 - 행복
sakura_surprised.png   # 사쿠라 - 놀람
sakura_sad.png         # 사쿠라 - 슬픔
sakura_angry.png       # 사쿠라 - 화남

yuki_normal.png        # 유키 - 평상시
yuki_smile.png         # 유키 - 미소
yuki_happy.png         # 유키 - 행복
yuki_surprised.png     # 유키 - 놀람
yuki_sad.png           # 유키 - 슬픔
yuki_angry.png         # 유키 - 화남

seolah_normal.png      # 설아 - 평상시
seolah_smile.png       # 설아 - 미소
seolah_panic.png       # 설아 - 당황
seolah_serious.png     # 설아 - 진지함
```

**표정 네이밍 가이드**:
- `normal`: 평상시, 기본 표정
- `smile`: 미소, 살짝 웃는 표정
- `happy`: 행복, 활짝 웃는 표정
- `surprised`: 놀람, 깜짝 놀란 표정
- `sad`: 슬픔, 우울한 표정
- `angry`: 화남, 분노한 표정
- `panic`: 당황, 패닉 상태
- `serious`: 진지함, 심각한 표정
- `embarrassed`: 부끄러움, 쑥스러운 표정
- `tired`: 피곤함, 지친 표정

#### 조연/엑스트라 캐릭터 (실루엣)
주요 캐릭터가 아닌 조연이나 엑스트라의 경우, 전용 이미지 대신 **실루엣 이미지**를 사용합니다.

```
female_silhouette.png  # 여성 실루엣 - 핑크색 반투명
male_silhouette.png    # 남성 실루엣 - 파란색 반투명
```

**특징:**
- 얼굴 디테일 없음 (입모양 등 표정 없음)
- 사람의 전신 형태만 표현
- 여성: 핑크색 (#ec4899) 반투명 (opacity 0.6)
- 남성: 파란색 (#3b82f6) 반투명 (opacity 0.6)

**사용 예시:**
```json
{
  "id": "scene_extra",
  "type": "dialogue",
  "character": "여학생",
  "characterImage": "female_silhouette.png",
  "characterPosition": "left",
  "text": "저기... 실례합니다."
}
```

```json
{
  "id": "scene_teacher",
  "type": "dialogue",
  "character": "담임선생님",
  "characterImage": "male_silhouette.png",
  "characterPosition": "center",
  "text": "오늘 수업은 여기까지입니다."
}
```

### 배경 이미지 예시

```
school_entrance.svg    # 학교 입구
school_hallway.svg     # 학교 복도
library.svg            # 도서관
cafe.svg               # 카페
garden.svg             # 정원
sunset.svg             # 석양
```

## 🎵 사운드 설정

### 배경음악 (Music)

배경음악은 게임의 분위기를 연출하는 브금(BGM)입니다.

**특징:**
- 자동으로 반복(loop) 재생됩니다
- `music` 필드를 변경하지 않으면 계속 재생됩니다
- `music: "none"`으로 설정하면 음악이 정지됩니다
- 새로운 음악으로 변경하면 기존 음악은 종료되고 새 음악이 재생됩니다

**파일 경로:**
```
public/VisualNovel/Sound/music/
├── peaceful_theme.mp3     # 평화로운 테마
├── battle_theme.mp3       # 전투 테마
├── sad_theme.mp3          # 슬픈 테마
└── ending_theme.mp3       # 엔딩 테마
```

**사용 예시:**

```json
{
  "id": "scene_01",
  "type": "dialogue",
  "character": "내레이터",
  "background": "school_entrance.svg",
  "music": "peaceful_theme.mp3",
  "text": "봄바람이 살랑이는 4월, 새로운 학교 생활이 시작되었다.",
  "nextScriptId": "scene_02"
}
```

**음악 정지 예시:**

```json
{
  "id": "scene_silent",
  "type": "dialogue",
  "character": "내레이터",
  "background": "empty_room.svg",
  "music": "none",
  "text": "조용한 침묵만이 흘렀다...",
  "nextScriptId": "scene_03"
}
```

### 효과음 (Effect Sound)

효과음은 특정 이벤트나 행동에 대한 효과음(SFX)입니다.

**특징:**
- 한 번만 재생됩니다 (반복 없음)
- 대화가 표시될 때 즉시 재생됩니다
- 여러 효과음을 동시에 재생할 수 없습니다 (마지막 것만 재생)

**파일 경로:**
```
public/VisualNovel/Sound/effect/
├── door_open.mp3          # 문 여는 소리
├── door_close.mp3         # 문 닫는 소리
├── footsteps.mp3          # 발소리
├── siren.mp3              # 사이렌 소리
├── explosion.mp3          # 폭발 소리
├── notification.mp3       # 알림음
└── item_get.mp3           # 아이템 획득 소리
```

**사용 예시:**

```json
{
  "id": "scene_door",
  "type": "dialogue",
  "character": "내레이터",
  "background": "school_hallway.svg",
  "effectSound": "door_open.mp3",
  "text": "문을 열었다.",
  "nextScriptId": "scene_02"
}
```

**음악과 효과음 동시 사용:**

```json
{
  "id": "scene_emergency",
  "type": "dialogue",
  "character": "내레이터",
  "background": "battle_field.svg",
  "music": "battle_theme.mp3",
  "effectSound": "siren.mp3",
  "text": "갑자기 긴급 사이렌이 울려퍼졌다!",
  "nextScriptId": "scene_next"
}
```

### 사운드 사용 팁

1. **배경음악 전환**
   - 장면이 바뀔 때 적절한 음악으로 변경
   - 평화로운 장면 → 긴장감 있는 장면으로 전환 시 음악도 변경
   
2. **효과음 타이밍**
   - 문 여는 대사에 `door_open.mp3`
   - 발소리가 들리는 장면에 `footsteps.mp3`
   - 폭발 장면에 `explosion.mp3`

3. **침묵 연출**
   - 극적인 장면에서 `music: "none"`으로 음악 정지
   - 긴장감을 높이거나 감정을 강조할 때 활용

4. **파일 포맷**
   - MP3 형식 권장 (브라우저 호환성 좋음)
   - WAV, OGG도 가능
   - 파일 크기 고려 (음악: 3-5MB, 효과음: 100KB-1MB 권장)

## 🔗 라인 연결 규칙

1. **씬 파일 내 이동**: `nextScriptId` 사용
   - 같은 JSON 파일 내의 다른 라인으로 이동
   
2. **씬 파일 간 이동**: `nextSceneFile` 사용
   - 다른 씬 파일로 이동 (챕터 간 이동 가능)
   - 경로 형식: `"Chapter2/chapter2_scene.json"`
   - 선택지에서 주로 사용

3. **우선순위**: `nextSceneFile` > `nextScriptId`
   - 둘 다 있으면 `nextSceneFile`이 우선

4. **엔딩 처리**: 마지막 라인에 `"isEnding": true` 설정
   - 게임 종료 또는 타이틀로 돌아가기 선택지 표시

5. **챕터 구조**: 
   - Chapter1~5: 메인 스토리
   - 각 챕터는 01, 02, 03... 순서로 파일 번호 부여
   - Ending 파일은 캐릭터명이나 엔딩 타입으로 명명

## ✏️ 작성 예시

### Chapter1/chapter1_entrance.json (입학식 장면)

```json
{
  "sceneId": "chapter1_entrance",
  "title": "입학식",
  "chapter": 1,
  "startId": "opening",
  "lines": [
    {
      "id": "opening",
      "type": "dialogue",
      "character": "내레이터",
      "background": "school_entrance.svg",
      "music": "peaceful_theme.mp3",
      "text": "봄바람이 살랑이는 4월, 새로운 학교 생활이 시작되었다.",
      "nextScriptId": "meet_seolah"
    },
    {
      "id": "meet_seolah",
      "type": "dialogue",
      "character": "설아",
      "characterImage": "seolah_smile.png",
      "characterPosition": "center-left",
      "background": "school_entrance.svg",
      "text": "안녕! 나는 설아야. 반가워!",
      "nextScriptId": "meet_yuki"
    },
    {
      "id": "meet_yuki",
      "type": "dialogue",
      "character": "유키",
      "characterImage": "yuki_normal.png",
      "characterPosition": "center-right",
      "background": "school_entrance.svg",
      "text": "...안녕. 유키라고 해.",
      "nextSceneFile": "Chapter1/chapter1_siren_alert.json"
    }
  ]
}
```

### Chapter1/chapter1_siren_alert.json (첫 전투 장면)

```json
{
  "sceneId": "chapter1_siren",
  "title": "긴급 상황",
  "chapter": 1,
  "startId": "alarm",
  "lines": [
    {
      "id": "alarm",
      "type": "dialogue",
      "character": "내레이터",
      "background": "school_hallway.svg",
      "music": "battle_theme.mp3",
      "effectSound": "siren.mp3",
      "text": "갑자기 사이렌이 울려퍼졌다!",
      "nextScriptId": "first_choice"
    },
    {
      "id": "first_choice",
      "type": "choice",
      "character": "설아",
      "characterImage": "seolah_serious.png",
      "characterPosition": "center-left",
      "background": "school_hallway.svg",
      "text": "어떻게 할까?",
      "choices": [
        {
          "text": "설아와 함께 간다",
          "nextSceneFile": "Chapter1/chapter1_with_seolah.json"
        },
        {
          "text": "유키와 함께 간다",
          "nextSceneFile": "Chapter1/chapter1_with_yuki.json"
        },
        {
          "text": "혼자 정찰한다",
          "nextScriptId": "solo_route"
        }
      ]
    },
    {
      "id": "solo_route",
      "type": "dialogue",
      "character": "내레이터",
      "background": "school_hallway.svg",
      "effectSound": "footsteps.mp3",
      "text": "혼자서 조심스럽게 앞으로 나아갔다...",
      "nextSceneFile": "Chapter1/chapter1_solo_investigation.json"
    }
  ]
}
```

### Chapter5/ending_seolah.json (설아 전용 엔딩)

```json
{
  "sceneId": "ending_seolah",
  "title": "설아 엔딩",
  "chapter": 5,
  "startId": "final_scene",
  "lines": [
    {
      "id": "final_scene",
      "type": "dialogue",
      "character": "설아",
      "characterImage": "seolah_smile.png",
      "characterPosition": "center",
      "background": "sunset.svg",
      "music": "ending_theme.mp3",
      "text": "우리 함께라면 어떤 어려움도 이겨낼 수 있어!",
      "nextScriptId": "ending_text"
    },
    {
      "id": "ending_text",
      "type": "dialogue",
      "character": "내레이터",
      "background": "sunset.svg",
      "text": "그렇게 두 사람의 이야기는 새로운 시작을 맞이했다...",
      "isEnding": true
    }
  ]
}
```


## 🎯 작성 팁

### 1. 파일 및 ID 명명 규칙
- **씬 파일명**: `chapter숫자_scene_name` 형식 (예: `chapter1_entrance`, `chapter2_battle`)
- **엔딩 파일**: `ending_character_name`, `ending_true` 형식
- **캠릭터 이미지**: `캠릭터ID_표정명.png` (예: `seolah_smile.png`, `sakura_panic.png`)
- **배경 이미지**: `scene_name.svg` (예: `school_entrance.svg`, `battle_field.svg`)
- **씬 ID**: `chapter1_entrance`, `chapter2_battle` 등
- **라인 ID**: `opening`, `meet_character`, `choice_01` 등

### 2. 챕터별 스토리 구조
```
Chapter1 (프롤로그)
  ├→ chapter1_entrance
  ├→ chapter1_siren_alert
  └→ chapter1_first_choice
       ├→ Chapter2 (루트 A)
       ├→ Chapter3 (루트 B)
       └→ Chapter4 (루트 C)

Chapter5 (엔딩)
  ├→ ending_seolah
  ├→ ending_yuki
  └→ ending_true
```

### 3. 챕터 설계 가이드
- **Chapter 1**: 프로로그, 캐릭터 소개, 세계관 설정 (각 씬당 20-30라인 권장)
- **Chapter 2-4**: 메인 스토리, 선택지에 따른 분기 (각 씬당 25-35라인 권장)
- **Chapter 5**: 엔딩 (각 엔딩당 20-30라인 권장)

**씬 내부 구성 규칙**:
- 한 씬 파일은 하나의 완결된 스토리 단위로 구성
- 대화 라인은 최소 5개 이상, 권장 10-20개
- 캐릭터 간의 충분한 상호작용 포함
- 분위기 연출을 위한 내레이션 활용
- 감정 표현을 위한 표정 변화 활용

### 4. 캐릭터 대화 및 스토리텔링
- 캐릭터 이름은 일관성 있게 사용
- 내레이션은 `character: "내레이터"` 사용
- 캐릭터 없는 씬은 character 필드 생략 가능

**풍부한 대화 작성 팁**:
- 한 주제를 3-5개의 대사로 나누어 자연스럽게 전개
- 캐릭터 간의 질문과 대답으로 상호작용 표현
- 감정 변화에 따른 표정 변경 (`normal` → `surprised` → `smile`)
- 분위기 연출을 위한 내레이션 삽입 (2-3개 대사마다)
- 대사 사이에 행동 묘사를 포함하여 상황 설명

**예시**:
```
내레이터: "봄바람이 살랑이는 오후..."
설아(평상): "오늘 날씨 정말 좋다!"
주인공: "그러게, 봄이 온 것 같아."
설아(미소): "희희, 우리 같이 산책할래?"
내레이터: "그녀는 활짝 웃으며 내 손을 잡았다."
```

### 5. 배경 전환
- 장소가 바뀔 때만 background 필드 변경
- 같은 장소면 생략 가능 (이전 배경 유지)

### 6. 선택지 설계
- 2~4개 선택지 권장
- 각 선택지는 명확하고 구별되는 결과로 이어져야 함
- 중요한 분기점에만 사용

**선택지 전 충분한 상황 설명 필요**:
- 선택지 등장 전에 5-10개 대사로 상황 설명
- 각 캐릭터의 의견을 명확히 제시
- 선택의 결과를 예측할 수 있는 정보 제공
- 선택지 직후에도 2-3개 대사로 결과 반영

## ⚠️ 주의사항

1. **JSON 문법 준수**: 쉼표, 따옴표, 중괄호 정확히 사용
2. **ID 중복 금지**: 같은 씬 파일 내에서 id 중복 불가
3. **순환 참조 방지**: nextScriptId로 무한 루프 만들지 않기
4. **이미지 파일 확인**: 존재하지 않는 이미지 파일명 사용 금지
5. **사운드 파일 확인**: 존재하지 않는 음악/효과음 파일명 사용 금지
6. **마지막 라인 처리**: 모든 루트의 마지막에는 nextSceneFile 또는 isEnding 필요
7. **챕터 번호 일관성**: sceneId와 chapter 필드의 챕터 번호를 일치시킬 것
8. **파일 경로 정확성**: nextSceneFile은 Script/ 폴더 기준 상대 경로 사용
9. **음악 반복 방지**: 같은 음악이 계속 재생 중이면 music 필드 생략 가능
10. **효과음 남용 방지**: 모든 대사에 효과음을 넣지 말고 필요한 곳에만 사용

## 📁 파일 구조

```
public/VisualNovel/
├── Script/
│   ├── config.json
│   ├── Chapter1/
│   │   ├── chapter1_entrance.json
│   ├── Chapter2/
│   ├── Chapter3/
│   ├── Chapter4/
│   └── Chapter5/
├── Character/
│   └── (캠릭터 이미지 파일들: 캠립터ID_표정명.png)
├── Background/
│   └── (배경 이미지 파일들: 장소명.svg)
└── Sound/
    ├── music/
    │   └── (배경음악 파일들: 테마명.mp3)
    └── effect/
        └── (효과음 파일들: 이벤트명.mp3)
```

## 🚀 작성 프로세스

1. **스토리 기획**: 전체 스토리 구조 및 챕터 분할 설계
2. **챕터 분리**: Chapter1~5로 대분류, 각 챕터의 주제 결정
3. **씬 파일 작성**: 각 챕터 내 씬들을 순서대로 파일 생성 (01, 02, 03...)
4. **라인 작성**: 각 씬 파일의 대사와 선택지 작성
5. **연결 설정**: nextScriptId(파일 내), nextSceneFile(파일 간) 연결
6. **엔딩 작성**: Chapter5에 모든 엔딩 시나리오 작성
7. **검증**: JSON 문법 오류 확인, 경로 정확성 검증
8. **테스트**: 실제 게임에서 모든 루트 동작 확인


### 라인 구성 비율 규칙
- **대화**: 60-70% (캐릭터 간 대화)
- **내레이션**: 20-30% (분위기, 상황 설명)
- **행동 묘사**: 10-20% (제스처, 표정 변화)

### 분량 가이드 예시

**나쁨**: 3-5개 라인 (간략한 설명만, 피하기)
**적정**: 10-15개 라인 (기본적인 스토리 전개)
**권장**: 25-35개 라인 (풍부한 스토리텔링, **이것을 목표로!**)

**활용 팁**:
- 한 주제를 여러 개의 짧은 대사로 나누기
- 캐릭터의 반응과 감정 변화 상세히 묘사
- 장면 전환 시 내레이션으로 분위기 조성
- 대화 중간에 생각이나 회상 삽입
- 효과음과 배경음악 변경으로 감정 강조

---

이 가이드를 참고하여 일관성 있고 완성도 높은 비주얼 노벨 스크립트를 작성하세요!
